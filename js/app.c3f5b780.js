(function(e){function t(t){for(var n,o,s=t[0],l=t[1],u=t[2],d=0,b=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);i&&i(t);while(b.length)b.shift()();return a.push.apply(a,u||[]),c()}function c(){for(var e,t=0;t<a.length;t++){for(var c=a[t],n=!0,s=1;s<c.length;s++){var l=c[s];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=c[0]))}return e}var n={},r={app:0},a=[];function o(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=e,o.c=n,o.d=function(e,t,c){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(c,n,function(t){return e[t]}.bind(null,n));return c},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/hexschool-vue-homework-6/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var i=l;a.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},"56d7":function(e,t,c){"use strict";c.r(t);c("e260"),c("e6cf"),c("cca6"),c("a79d"),c("d3b7");var n=c("7a23");function r(e,t){var c=Object(n["x"])("router-view");return Object(n["s"])(),Object(n["d"])(c)}c("9cdc");const a={};a.render=r;var o=a,s=c("6c02"),l=(c("a4d3"),c("e01a"),Object(n["g"])("h1",null,"商品列表",-1)),u={class:"container"},i={class:"row"},d={class:"card"},b={class:"card-body"},p={class:"card-title"},O={class:"card-text"},m=Object(n["f"])("查看詳情");function j(e,t){var c=Object(n["x"])("Header"),r=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])(c),l,Object(n["g"])("div",u,[Object(n["g"])("div",i,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.products,(function(t){return Object(n["s"])(),Object(n["d"])("div",{class:"col-4",key:t.id},[Object(n["g"])("div",d,[Object(n["g"])("img",{src:t.imageUrl,class:"card-img-top",alt:""},null,8,["src"]),Object(n["g"])("div",b,[Object(n["g"])("h5",p,Object(n["A"])(t.title),1),Object(n["g"])("p",O,Object(n["A"])(t.description),1),Object(n["g"])(r,{class:"btn btn-primary me-2",to:{name:"product",params:{id:t.id}}},{default:Object(n["H"])((function(){return[m]})),_:2},1032,["to"]),Object(n["g"])("button",{type:"button",class:"btn btn-secondary",onClick:function(c){return e.addToCart(t.id)}},"加入購物車",8,["onClick"])])])])})),128))])])])}var g=c("1da1"),f=(c("96cf"),c("99af"),c("bc3a")),h=c.n(f),v={getProducts:function(){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar","/products"))},getProduct:function(e){var t=e.id;return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar","/product/").concat(t))},getAdminProducts:function(e){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/products?page=").concat(e))}},w={postCart:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar","/cart"),{data:e})},getCart:function(){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar","/cart"))},deleteCarts:function(){return h.a.delete("".concat("https://vue3-course-api.hexschool.io/api/caesar","/carts"))},deleteCart:function(e){return h.a.delete("".concat("https://vue3-course-api.hexschool.io/api/caesar","/cart/").concat(e))},putCartQty:function(e,t){return h.a.put("".concat("https://vue3-course-api.hexschool.io/api/caesar","/cart/").concat(e),{data:t})}},x={class:"header my-5"},y=Object(n["f"])("回首頁"),k=Object(n["f"])("前往購物車"),C=Object(n["f"])("登入"),P=Object(n["f"])("前往後台");function _(e,t){var c=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])("header",x,[Object(n["g"])(c,{to:"/",class:"mx-3"},{default:Object(n["H"])((function(){return[y]})),_:1}),Object(n["g"])(c,{to:"/cart",class:"mx-3"},{default:Object(n["H"])((function(){return[k]})),_:1}),e.getToken?(Object(n["s"])(),Object(n["d"])(c,{key:0,to:"/login"},{default:Object(n["H"])((function(){return[C]})),_:1})):Object(n["e"])("",!0),Object(n["g"])(c,{to:"/admin"},{default:Object(n["H"])((function(){return[P]})),_:1})])}var M={computed:{getToken:function(){var e=localStorage.getItem("token");return!e}}};M.render=_;var A=M,U={data:function(){return{products:[]}},methods:{fetchProducts:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.getProducts();case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("取得商品列表失敗");case 7:e.products=n.products,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),window.alert(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},addToCart:function(e){var t=arguments;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:1,c.prev=1,r={product_id:e,qty:n},c.next=5,w.postCart(r);case 5:if(a=c.sent,o=a.data,o.success){c.next=9;break}throw new Error("加入購物車失敗");case 9:window.alert("加入購物車成功"),c.next=15;break;case 12:c.prev=12,c.t0=c["catch"](1),window.alert(c.t0.message);case 15:case"end":return c.stop()}}),c,null,[[1,12]])})))()}},created:function(){this.fetchProducts()},components:{Header:A}};U.render=j;var E=U,I=(c("b0c0"),{class:"container"}),R={class:"text-end"},V={class:"table align-middle"},$=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th"),Object(n["g"])("th",null,"品名"),Object(n["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["g"])("th",null,"單價")])],-1),D={key:0,class:"fas fa-spinner fa-pulse"},q=Object(n["f"])(" x "),S={key:0,class:"text-success"},H={class:"input-group input-group-sm"},N={class:"input-group mb-3"},T={class:"input-group-text",id:"basic-addon2"},L={class:"text-end"},F={key:0,class:"text-success"},J=Object(n["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),z={class:"text-end"},W={key:0},B=Object(n["g"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),Q={class:"text-end text-success"},G={class:"input-group mb-3 input-group-sm"},K={class:"input-group-append"},X={class:"mb-3"},Y=Object(n["g"])("label",{for:"email",class:"form-label"},"Email",-1),Z={class:"mb-3"},ee=Object(n["g"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),te={class:"mb-3"},ce=Object(n["g"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),ne={class:"mb-3"},re=Object(n["g"])("label",{for:"address",class:"form-label"},"收件人地址",-1),ae={class:"mb-3"},oe=Object(n["g"])("label",{for:"message",class:"form-label"},"留言",-1),se=Object(n["g"])("div",{class:"text-end"},[Object(n["g"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function le(e,t){var c=Object(n["x"])("Header"),r=Object(n["x"])("v-field"),a=Object(n["x"])("error-message"),o=Object(n["x"])("v-form");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])(c),Object(n["g"])("div",I,[Object(n["g"])("div",R,[Object(n["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(){return e.deleteCarts&&e.deleteCarts.apply(e,arguments)})},"清空購物車")]),Object(n["g"])("table",V,[$,Object(n["g"])("tbody",null,[e.cart.carts?(Object(n["s"])(!0),Object(n["d"])(n["a"],{key:0},Object(n["w"])(e.cart.carts,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(c){return e.deleteCartItem(t.id)},disabled:e.loadingStatus.loadingItem===t.id},[e.loadingStatus.loadingItem===t.id?(Object(n["s"])(),Object(n["d"])("i",D)):Object(n["e"])("",!0),q],8,["onClick","disabled"])]),Object(n["g"])("td",null,[Object(n["f"])(Object(n["A"])(t.product.title)+" ",1),t.coupon?(Object(n["s"])(),Object(n["d"])("div",S,"已套用優惠券")):Object(n["e"])("",!0)]),Object(n["g"])("td",null,[Object(n["g"])("div",H,[Object(n["g"])("div",N,[Object(n["I"])(Object(n["g"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(c){return e.updateCartQty(t)},disabled:e.loadingStatus.loadingItem===t.id},null,40,["onUpdate:modelValue","onBlur","disabled"]),[[n["E"],t.qty,void 0,{number:!0}]]),Object(n["g"])("span",T,Object(n["A"])(t.product.unit),1)])])]),Object(n["g"])("td",L,[e.cart.final_total!==e.cart.total?(Object(n["s"])(),Object(n["d"])("small",F,"折扣價：")):Object(n["e"])("",!0),Object(n["f"])(" "+Object(n["A"])(t.final_total),1)])])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[J,Object(n["g"])("td",z,Object(n["A"])(e.cart.total),1)]),e.cart.final_total!==e.cart.total?(Object(n["s"])(),Object(n["d"])("tr",W,[B,Object(n["g"])("td",Q,Object(n["A"])(e.cart.final_total),1)])):Object(n["e"])("",!0)])]),Object(n["g"])("div",G,[Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[n["E"],e.coupon_code]]),Object(n["g"])("div",K,[Object(n["g"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[3]||(t[3]=function(){return e.addCouponCode&&e.addCouponCode.apply(e,arguments)})}," 套用優惠碼 ")])]),Object(n["g"])(o,{ref:"form",class:"col-md-6 mx-auto mb-5",onSubmit:e.addOder},{default:Object(n["H"])((function(c){var o=c.errors;return[Object(n["g"])("div",X,[Y,Object(n["g"])(r,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":o["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:e.order.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.order.user.email=t})},null,8,["class","modelValue"]),Object(n["g"])(a,{name:"email",class:"invalid-feedback"})]),Object(n["g"])("div",Z,[ee,Object(n["g"])(r,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":o["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:e.order.user.name,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.order.user.name=t})},null,8,["class","modelValue"]),Object(n["g"])(a,{name:"姓名",class:"invalid-feedback"})]),Object(n["g"])("div",te,[ce,Object(n["g"])(r,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":o["電話"]}],placeholder:"請輸入電話",rules:"required|min:8|max:10|number",modelValue:e.order.user.tel,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.order.user.tel=t})},null,8,["class","modelValue"]),Object(n["g"])(a,{name:"電話",class:"invalid-feedback"})]),Object(n["g"])("div",ne,[re,Object(n["g"])(r,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":o["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:e.order.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.order.user.address=t})},null,8,["class","modelValue"]),Object(n["g"])(a,{name:"地址",class:"invalid-feedback"})]),Object(n["g"])("div",ae,[oe,Object(n["I"])(Object(n["g"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.order.message=t})},null,512),[[n["E"],e.order.message]])]),se]})),_:1},8,["onSubmit"])])])}var ue={postOder:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar","/order"),{data:e})},payOrder:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar","/pay/").concat(e))},getOrder:function(e){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar","/order/").concat(e))}},ie={postCoupon:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar","/coupon"),e)}},de=c("7bb1"),be=c("3aa8"),pe=c("cbdf");Object(de["e"])("required",be["e"]),Object(de["e"])("email",be["a"]),Object(de["e"])("min",be["c"]),Object(de["e"])("max",be["b"]),Object(de["e"])("number",be["d"]),Object(pe["a"])("https://unpkg.com/@vee-validate/i18n@4.1.0/dist/locale/zh_TW.json"),Object(de["d"])({generateMessage:Object(pe["b"])("zh_TW",{messages:{number:function(e){return"".concat(e.field," 必須是數字喔!")}}})});var Oe={data:function(){return{cart:{},loadingStatus:{loadingItem:""},order:{user:{email:"",name:"",tel:"",address:""},message:""},coupon_code:""}},methods:{fetchCarts:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.getCart();case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("取得購物車失敗");case 7:e.cart=n.data,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),window.alert(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},addOder:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,c=e.order,t.next=4,ue.postOder(c);case 4:if(n=t.sent,r=n.data,r.success){t.next=8;break}throw new Error("送出訂單失敗");case 8:e.$refs.form.resetForm(),e.$router.push("/checkout/".concat(r.orderId)),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),window.alert(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},deleteCarts:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.deleteCarts();case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("刪除購物車失敗");case 7:window.alert("刪除購物車成功"),e.fetchCarts(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),window.alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deleteCartItem:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,w.deleteCart(e);case 3:if(n=c.sent,r=n.data,r.success){c.next=7;break}throw new Error("刪除購物車品項失敗");case 7:window.alert("刪除成功"),t.fetchCarts(),c.next=14;break;case 11:c.prev=11,c.t0=c["catch"](0),window.alert(c.t0.message);case 14:case"end":return c.stop()}}),c,null,[[0,11]])})))()},updateCartQty:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,n={product_id:e.product_id,qty:e.qty},c.next=4,w.putCartQty(e.id,n);case 4:if(r=c.sent,a=r.data,a.success){c.next=8;break}throw new Error("更改購物車商品數量失敗");case 8:t.fetchCarts(),console.log(e),c.next=15;break;case 12:c.prev=12,c.t0=c["catch"](0),window.alert(c.t0.message);case 15:case"end":return c.stop()}}),c,null,[[0,12]])})))()},addCouponCode:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.postCoupon({code:e.coupon_code});case 3:if(c=t.sent,n=c.data,console.log(n),n.success){t.next=8;break}throw new Error("加入優惠券失敗");case 8:e.fetchCarts(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),window.alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},created:function(){this.fetchCarts()},components:{Header:A,"v-field":de["b"],"v-form":de["c"],"error-message":de["a"]}};Oe.render=le;var me=Oe,je={class:"container"},ge={class:"row mb-3"},fe={class:"col-6"},he={class:"col-6"},ve={class:"row"};function we(e,t){var c=Object(n["x"])("Header");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])(c),Object(n["g"])("div",je,[Object(n["g"])("div",ge,[Object(n["g"])("div",fe,[Object(n["g"])("img",{src:e.product.imageUrl,alt:""},null,8,["src"])]),Object(n["g"])("div",he,[Object(n["g"])("h2",null,"產品名稱："+Object(n["A"])(e.product.title),1),Object(n["g"])("h4",null,"產品說明："+Object(n["A"])(e.product.content),1),Object(n["g"])("p",null,"產品敘述："+Object(n["A"])(e.product.description),1),Object(n["g"])("p",null,"原價："+Object(n["A"])(e.product.origin_price),1),Object(n["g"])("p",null,"售價："+Object(n["A"])(e.product.price),1),Object(n["I"])(Object(n["g"])("input",{type:"number",min:"1","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.qty=t})},null,512),[[n["E"],e.qty,void 0,{number:!0}]]),Object(n["g"])("button",{type:"button",onClick:t[2]||(t[2]=function(t){return e.addToCart(e.product.id,e.qty)})},"加入購物車")])]),Object(n["g"])("div",ve,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.product.imagesUrl,(function(e,t){return Object(n["s"])(),Object(n["d"])("img",{src:e,key:t,alt:"",class:"col-4 mb-3"},null,8,["src"])})),128))])])])}var xe={data:function(){return{product:{},qty:1}},methods:{fetchProduct:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,v.getProduct({id:e});case 3:if(n=c.sent,r=n.data,r.success){c.next=7;break}throw new Error("獲取商品資料失敗");case 7:t.product=r.product,c.next=13;break;case 10:c.prev=10,c.t0=c["catch"](0),window.alert(c.t0.message);case 13:case"end":return c.stop()}}),c,null,[[0,10]])})))()},addToCart:function(e){var t=arguments;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:1,c.prev=1,r={product_id:e,qty:n},c.next=5,w.postCart(r);case 5:if(a=c.sent,o=a.data,o.success){c.next=9;break}throw new Error("加入購物車失敗");case 9:window.alert("加入購物車成功"),c.next=15;break;case 12:c.prev=12,c.t0=c["catch"](1),window.alert(c.t0.message);case 15:case"end":return c.stop()}}),c,null,[[1,12]])})))()}},created:function(){var e=this.$route.params.id;this.fetchProduct(e)},components:{Header:A}};xe.render=we;var ye=xe,ke={class:"container"},Ce={class:"row justify-content-center"},Pe=Object(n["g"])("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),_e={class:"col-8"},Me={class:"form-floating mb-3"},Ae=Object(n["g"])("label",{for:"username"},"Email address",-1),Ue={class:"form-floating"},Ee=Object(n["g"])("label",{for:"password"},"Password",-1),Ie=Object(n["g"])("p",{class:"mt-5 mb-3 text-muted"},"© 2021~∞ - 六角學院",-1);function Re(e,t){var c=Object(n["x"])("v-field"),r=Object(n["x"])("error-message"),a=Object(n["x"])("v-form");return Object(n["s"])(),Object(n["d"])("div",ke,[Object(n["g"])("div",Ce,[Pe,Object(n["g"])("div",_e,[Object(n["g"])(a,{id:"form",class:"form-signin"},{default:Object(n["H"])((function(a){var o=a.errors;return[Object(n["g"])("div",Me,[Object(n["g"])(c,{type:"email",class:["form-control",{"is-invalid":o["email"]}],id:"username",placeholder:"name@example.com",autofocus:"",modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.email=t}),name:"email",rules:"required|email"},null,8,["modelValue","class"]),Ae,Object(n["g"])(r,{name:"email",class:"invalid-feedback"})]),Object(n["g"])("div",Ue,[Object(n["g"])(c,{type:"password",class:["form-control",{"is-invalid":o["password"]}],id:"password",placeholder:"Password",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),name:"password",rules:"required|min:8"},null,8,["modelValue","class"]),Ee,Object(n["g"])(r,{name:"password",class:"invalid-feedback"})]),Object(n["g"])("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit",onClick:t[3]||(t[3]=Object(n["J"])((function(t){return e.login()}),["prevent"]))}," 登入 ")]})),_:1})])]),Ie])}c("ac1f"),c("5319");var Ve={login:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/admin","/signin"),e)}};Object(de["e"])("required",be["e"]),Object(de["e"])("email",be["a"]),Object(de["e"])("min",be["c"]),Object(pe["a"])("https://unpkg.com/@vee-validate/i18n@4.1.0/dist/locale/zh_TW.json"),Object(de["d"])({generateMessage:Object(pe["b"])("zh_TW")});var $e={data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.email){t.next=3;break}throw new Error("請輸入帳密");case 3:return c={username:e.email,password:e.password},t.next=6,Ve.login(c);case 6:if(n=t.sent,r=n.data,r.success){t.next=10;break}throw new Error("無法登入");case 10:localStorage.setItem("token",r.token),window.location.replace("./index.html"),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),window.alert(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()}},components:{"v-field":de["b"],"v-form":de["c"],"error-message":de["a"]}};$e.render=Re;var De=$e,qe={class:"my-5 row justify-content-center"},Se={class:"table align-middle"},He=Object(n["g"])("thead",null,[Object(n["g"])("th",null,"品名"),Object(n["g"])("th",null,"數量"),Object(n["g"])("th",null,"單價")],-1),Ne={class:"text-end"},Te=Object(n["g"])("td",{colspan:"2",class:"text-end"},"總計",-1),Le={class:"text-end"},Fe={class:"table"},Je=Object(n["g"])("th",{width:"100"},"Email",-1),ze=Object(n["g"])("th",null,"姓名",-1),We=Object(n["g"])("th",null,"收件人電話",-1),Be=Object(n["g"])("th",null,"收件人地址",-1),Qe=Object(n["g"])("th",null,"付款狀態",-1),Ge={key:0},Ke={key:1,class:"text-success"},Xe={key:0,class:"text-end"},Ye=Object(n["g"])("button",{class:"btn btn-danger"},"確認付款去",-1);function Ze(e,t){var c=Object(n["x"])("Header");return Object(n["s"])(),Object(n["d"])("div",qe,[Object(n["g"])(c),Object(n["g"])("form",{class:"col-md-6",onSubmit:t[1]||(t[1]=Object(n["J"])((function(){return e.payOrder&&e.payOrder.apply(e,arguments)}),["prevent"]))},[Object(n["g"])("table",Se,[He,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.order.products,(function(e){return Object(n["s"])(),Object(n["d"])("tr",{key:e.id},[Object(n["g"])("td",null,Object(n["A"])(e.product.title),1),Object(n["g"])("td",null,Object(n["A"])(e.qty)+"/"+Object(n["A"])(e.product.unit),1),Object(n["g"])("td",Ne,Object(n["A"])(e.final_total),1)])})),128))]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[Te,Object(n["g"])("td",Le,Object(n["A"])(e.order.total),1)])])]),Object(n["g"])("table",Fe,[Object(n["g"])("tbody",null,[Object(n["g"])("tr",null,[Je,Object(n["g"])("td",null,Object(n["A"])(e.order.user.email),1)]),Object(n["g"])("tr",null,[ze,Object(n["g"])("td",null,Object(n["A"])(e.order.user.name),1)]),Object(n["g"])("tr",null,[We,Object(n["g"])("td",null,Object(n["A"])(e.order.user.tel),1)]),Object(n["g"])("tr",null,[Be,Object(n["g"])("td",null,Object(n["A"])(e.order.user.address),1)]),Object(n["g"])("tr",null,[Qe,Object(n["g"])("td",null,[e.order.is_paid?(Object(n["s"])(),Object(n["d"])("span",Ke,"付款完成")):(Object(n["s"])(),Object(n["d"])("span",Ge,"尚未付款"))])])])]),!1===e.order.is_paid?(Object(n["s"])(),Object(n["d"])("div",Xe,[Ye])):Object(n["e"])("",!0)],32)])}var et={data:function(){return{order:{user:{}},orderId:""}},methods:{fetchOrder:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue.getOrder(e.orderId);case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("取得訂單失敗");case 7:console.log(n),e.order=n.order,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),window.alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},payOrder:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue.payOrder(e.orderId);case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("付款失敗");case 7:e.fetchOrder(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),window.alert(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},created:function(){this.orderId=this.$route.params.id,this.fetchOrder()},components:{Header:A}};et.render=Ze;var tt=et,ct={class:"my-5"},nt=Object(n["f"])("商品列表"),rt=Object(n["f"])("訂單"),at=Object(n["f"])("優惠券");function ot(e,t){var c=Object(n["x"])("router-link"),r=Object(n["x"])("router-view");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])("nav",ct,[Object(n["g"])(c,{to:"/admin",class:"mx-3"},{default:Object(n["H"])((function(){return[nt]})),_:1}),Object(n["g"])(c,{to:"/admin/order",class:"mx-3"},{default:Object(n["H"])((function(){return[rt]})),_:1}),Object(n["g"])(c,{to:"/admin/coupon",class:"mx-3"},{default:Object(n["H"])((function(){return[at]})),_:1})]),Object(n["g"])(r)])}const st={};st.render=ot;var lt=st,ut={class:"container"},it={class:"text-end mt-4"},dt={class:"table mt-4"},bt=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{width:"120"},"分類"),Object(n["g"])("th",null,"產品名稱"),Object(n["g"])("th",{width:"120"},"原價"),Object(n["g"])("th",{width:"120"},"售價"),Object(n["g"])("th",{width:"100"},"是否啟用"),Object(n["g"])("th",{width:"200"},"編輯")])],-1),pt={class:"text-right"},Ot={class:"text-right"},mt={key:0,class:"text-success"},jt={key:1},gt={class:"btn-group"};function ft(e,t){var c=Object(n["x"])("Pagination"),r=Object(n["x"])("DelModal"),a=Object(n["x"])("ProductModal");return Object(n["s"])(),Object(n["d"])("div",ut,[Object(n["g"])("div",it,[Object(n["g"])("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=function(t){return e.openProductModal(!0)})}," 建立新的產品 ")]),Object(n["g"])("table",dt,[bt,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.products,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id},[Object(n["g"])("td",null,Object(n["A"])(t.category),1),Object(n["g"])("td",null,Object(n["A"])(t.title),1),Object(n["g"])("td",pt,Object(n["A"])(e.$filters.currency(t.origin_price)),1),Object(n["g"])("td",Ot,Object(n["A"])(e.$filters.currency(t.price)),1),Object(n["g"])("td",null,[t.is_enabled?(Object(n["s"])(),Object(n["d"])("span",mt,"啟用")):(Object(n["s"])(),Object(n["d"])("span",jt,"未啟用"))]),Object(n["g"])("td",null,[Object(n["g"])("div",gt,[Object(n["g"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(c){return e.openProductModal(!1,t)}},"編輯",8,["onClick"]),Object(n["g"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(c){return e.openDelProductModal(t)}},"刪除",8,["onClick"])])])])})),128))])]),Object(n["g"])(c,{pages:e.pagination,onEmitPages:e.fetchProducts},null,8,["pages","onEmitPages"]),Object(n["g"])(r,{item:e.tempProduct,onDelItem:e.delProduct,ref:"delModal"},null,8,["item","onDelItem"]),Object(n["g"])(a,{product:e.tempProduct,isNew:e.isNew,ref:"productModal",onUpdateProduct:e.updateProduct},null,8,["product","isNew","onUpdateProduct"])])}var ht=c("5530"),vt={getAdminProducts:function(e){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/products?page=").concat(e))},deleteAdminProduct:function(e){return h.a.delete("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/product/").concat(e))},uploadFile:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/upload/"),e,{headers:{"Content-Type":"multipart/form-data"}})},postAdminProduct:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/product"),{data:e})},putAdminProduct:function(e,t){return h.a.put("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/product/").concat(e),{data:t})}},wt={"aria-label":"Page navigation"},xt={class:"pagination justify-content-center"},yt=Object(n["g"])("span",{"aria-hidden":"true"},"«",-1),kt={key:0,class:"page-link"},Ct=Object(n["g"])("span",{"aria-hidden":"true"},"»",-1);function Pt(e,t){return Object(n["s"])(),Object(n["d"])("nav",wt,[Object(n["g"])("ul",xt,[Object(n["g"])("li",{class:["page-item",{disabled:1===e.pages.current_page}]},[Object(n["g"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(n["J"])((function(t){return e.emitPages(e.pages.current_page-1)}),["prevent"]))},[yt])],2),(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.pages.total_pages,(function(t,c){return Object(n["s"])(),Object(n["d"])("li",{key:c,class:["page-item",{active:t===e.pages.current_page}]},[t===e.pages.current_page?(Object(n["s"])(),Object(n["d"])("span",kt,Object(n["A"])(t),1)):(Object(n["s"])(),Object(n["d"])("a",{key:1,class:"page-link",href:"#",onClick:Object(n["J"])((function(c){return e.emitPages(t)}),["prevent"])},Object(n["A"])(t),9,["onClick"]))],2)})),128)),Object(n["g"])("li",{class:["page-item",{disabled:e.pages.current_page===e.pages.total_pages}]},[Object(n["g"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(n["J"])((function(t){return e.emitPages(e.pages.current_page+1)}),["prevent"]))},[Ct])],2)])])}var _t={props:{pages:{type:Object,default:function(){return{}}}},methods:{emitPages:function(e){this.$emit("emit-pages",e)}}};_t.render=Pt;var Mt=_t,At={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Ut={class:"modal-dialog",role:"document"},Et={class:"modal-content border-0"},It={class:"modal-header bg-danger text-white"},Rt={class:"modal-title"},Vt=Object(n["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$t={class:"modal-body"},Dt=Object(n["f"])(" 是否刪除 "),qt={class:"text-danger"},St=Object(n["f"])(" (刪除後將無法恢復)。 "),Ht={class:"modal-footer"},Nt=Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function Tt(e,t){return Object(n["s"])(),Object(n["d"])("div",At,[Object(n["g"])("div",Ut,[Object(n["g"])("div",Et,[Object(n["g"])("div",It,[Object(n["g"])("h5",Rt,[Object(n["g"])("span",null,"刪除 "+Object(n["A"])(e.item.title),1)]),Vt]),Object(n["g"])("div",$t,[Dt,Object(n["g"])("strong",qt,Object(n["A"])(e.item.title),1),St]),Object(n["g"])("div",Ht,[Nt,Object(n["g"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(){return e.delItem&&e.delItem.apply(e,arguments)})},"確認刪除 ")])])])],512)}var Lt=c("7c2b"),Ft=c.n(Lt),Jt={methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new Ft.a(this.$refs.modal)}},zt={props:{item:{type:Object,default:function(){return{}}}},methods:{delItem:function(){this.$emit("delItem")}},mixins:[Jt]};zt.render=Tt;var Wt=zt,Bt=(c("a434"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),Qt={class:"modal-dialog modal-xl",role:"document"},Gt={class:"modal-content border-0"},Kt={class:"modal-header bg-dark text-white"},Xt={class:"modal-title",id:"exampleModalLabel"},Yt={key:0},Zt={key:1},ec=Object(n["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),tc={class:"modal-body"},cc={class:"row"},nc={class:"col-sm-4"},rc={class:"mb-3"},ac=Object(n["g"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),oc={class:"mb-3"},sc={for:"customFile",class:"form-label"},lc=Object(n["f"])("或 上傳圖片 "),uc={key:0,class:"fas fa-spinner fa-spin"},ic={key:0,class:"mt-5"},dc={key:0},bc={class:"col-sm-8"},pc={class:"mb-3"},Oc=Object(n["g"])("label",{for:"title",class:"form-label"},"標題",-1),mc={class:"row gx-2"},jc={class:"mb-3 col-md-6"},gc=Object(n["g"])("label",{for:"category",class:"form-label"},"分類",-1),fc={class:"mb-3 col-md-6"},hc=Object(n["g"])("label",{for:"price",class:"form-label"},"單位",-1),vc={class:"row gx-2"},wc={class:"mb-3 col-md-6"},xc=Object(n["g"])("label",{for:"origin_price",class:"form-label"},"原價",-1),yc={class:"mb-3 col-md-6"},kc=Object(n["g"])("label",{for:"price",class:"form-label"},"售價",-1),Cc=Object(n["g"])("hr",null,null,-1),Pc={class:"mb-3"},_c=Object(n["g"])("label",{for:"description",class:"form-label"},"產品描述",-1),Mc={class:"mb-3"},Ac=Object(n["g"])("label",{for:"content",class:"form-label"},"說明內容",-1),Uc={class:"mb-3"},Ec={class:"form-check"},Ic=Object(n["g"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),Rc={class:"modal-footer"},Vc=Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function $c(e,t){return Object(n["s"])(),Object(n["d"])("div",Bt,[Object(n["g"])("div",Qt,[Object(n["g"])("div",Gt,[Object(n["g"])("div",Kt,[Object(n["g"])("h5",Xt,[e.isNew?(Object(n["s"])(),Object(n["d"])("span",Yt,"新增產品")):(Object(n["s"])(),Object(n["d"])("span",Zt,"編輯產品"))]),ec]),Object(n["g"])("div",tc,[Object(n["g"])("div",cc,[Object(n["g"])("div",nc,[Object(n["g"])("div",rc,[ac,Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tempProduct.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[n["E"],e.tempProduct.imageUrl]])]),Object(n["g"])("div",oc,[Object(n["g"])("label",sc,[lc,e.status.fileUploading?(Object(n["s"])(),Object(n["d"])("i",uc)):Object(n["e"])("",!0)]),Object(n["g"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:t[2]||(t[2]=function(){return e.uploadFile&&e.uploadFile.apply(e,arguments)})},null,544)]),Object(n["g"])("img",{class:"img-fluid",src:e.tempProduct.imageUrl},null,8,["src"]),e.tempProduct.imagesUrl?(Object(n["s"])(),Object(n["d"])("div",ic,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.tempProduct.imagesUrl,(function(t,c){return Object(n["s"])(),Object(n["d"])("div",{class:"mb-3",key:c},[Object(n["I"])(Object(n["g"])("input",{type:"url",class:"form-control form-control","onUpdate:modelValue":function(t){return e.tempProduct.imagesUrl[c]=t},placeholder:"請輸入連結"},null,8,["onUpdate:modelValue"]),[[n["E"],e.tempProduct.imagesUrl[c]]]),Object(n["g"])("div",null,[Object(n["g"])("img",{class:"img-fluid",src:t},null,8,["src"])]),Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return e.tempProduct.imagesUrl.splice(c,1)}}," 移除 ",8,["onClick"])])})),128)),e.tempProduct.imagesUrl[e.tempProduct.imagesUrl.length-1]||!e.tempProduct.imagesUrl.length?(Object(n["s"])(),Object(n["d"])("div",dc,[Object(n["g"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=function(t){return e.tempProduct.imagesUrl.push("")})}," 新增圖片 ")])):Object(n["e"])("",!0)])):Object(n["e"])("",!0)]),Object(n["g"])("div",bc,[Object(n["g"])("div",pc,[Oc,Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.tempProduct.title=t}),placeholder:"請輸入標題"},null,512),[[n["E"],e.tempProduct.title]])]),Object(n["g"])("div",mc,[Object(n["g"])("div",jc,[gc,Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.tempProduct.category=t}),placeholder:"請輸入分類"},null,512),[[n["E"],e.tempProduct.category]])]),Object(n["g"])("div",fc,[hc,Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.tempProduct.unit=t}),placeholder:"請輸入單位"},null,512),[[n["E"],e.tempProduct.unit]])])]),Object(n["g"])("div",vc,[Object(n["g"])("div",wc,[xc,Object(n["I"])(Object(n["g"])("input",{type:"number",class:"form-control",id:"origin_price",min:"0","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.tempProduct.origin_price=t}),placeholder:"請輸入原價"},null,512),[[n["E"],e.tempProduct.origin_price,void 0,{number:!0}]])]),Object(n["g"])("div",yc,[kc,Object(n["I"])(Object(n["g"])("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.tempProduct.price=t}),min:"0",placeholder:"請輸入售價"},null,512),[[n["E"],e.tempProduct.price,void 0,{number:!0}]])])]),Cc,Object(n["g"])("div",Pc,[_c,Object(n["I"])(Object(n["g"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.tempProduct.description=t}),placeholder:"請輸入產品描述"},null,512),[[n["E"],e.tempProduct.description]])]),Object(n["g"])("div",Mc,[Ac,Object(n["I"])(Object(n["g"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.tempProduct.content=t}),placeholder:"請輸入產品說明內容"},null,512),[[n["E"],e.tempProduct.content]])]),Object(n["g"])("div",Uc,[Object(n["g"])("div",Ec,[Object(n["I"])(Object(n["g"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[n["D"],e.tempProduct.is_enabled]]),Ic])])])])]),Object(n["g"])("div",Rc,[Vc,Object(n["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=function(t){return e.$emit("update-product",e.tempProduct)})}," 確認 ")])])])],512)}var Dc={props:{product:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{status:{},modal:"",tempProduct:{}}},methods:{uploadFile:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,c=e.$refs.fileInput.files[0],n=new FormData,n.append("file-to-upload",c),e.status.fileUploading=!0,t.next=7,vt.uploadFile(n);case 7:if(r=t.sent,a=r.data,e.status.fileUploading=!1,a.success){t.next=12;break}throw new Error("上傳圖片失敗");case 12:e.tempProduct.imageUrl=a.imageUrl,e.$refs.fileInput.value="",t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),window.alert(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()}},watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl="")}},mixins:[Jt]};Dc.render=$c;var qc=Dc,Sc={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,status:{fileUploading:!1}}},methods:{fetchProducts:function(){var e=arguments,t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,c.prev=1,c.next=4,vt.getAdminProducts(n);case 4:r=c.sent,a=r.data,console.log(a),t.products=a.products,t.pagination=a.pagination,c.next=14;break;case 11:c.prev=11,c.t0=c["catch"](1),window.alert(c.t0.message);case 14:case"end":return c.stop()}}),c,null,[[1,11]])})))()},delProduct:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt.deleteAdminProduct(e.tempProduct.id);case 3:if(c=t.sent,n=c.data,console.log(n),n.success){t.next=8;break}throw new Error("刪除商品失敗");case 8:e.$refs.delModal.hideModal(),e.fetchProducts(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),window.alert(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},updateProduct:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(c.prev=0,t.tempProduct=e,!t.isNew){c.next=14;break}return c.next=5,vt.postAdminProduct(t.tempProduct);case 5:if(n=c.sent,r=n.data,console.log(r),r.success){c.next=10;break}throw new Error("新增商品失敗");case 10:t.$refs.productModal.hideModal(),t.fetchProducts(),c.next=23;break;case 14:return c.next=16,vt.putAdminProduct(t.tempProduct.id,t.tempProduct);case 16:if(a=c.sent,o=a.data,console.log(o),o.success){c.next=21;break}throw new Error("修改商品失敗");case 21:t.$refs.productModal.hideModal(),t.fetchProducts();case 23:c.next=28;break;case 25:c.prev=25,c.t0=c["catch"](0),window.alert(c.t0.message);case 28:case"end":return c.stop()}}),c,null,[[0,25]])})))()},openDelProductModal:function(e){this.tempProduct=Object(ht["a"])({},e),this.$refs.delModal.openModal()},openProductModal:function(e,t){e?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object(ht["a"])({},t),this.isNew=!1),this.$refs.productModal.openModal()}},created:function(){this.fetchProducts()},components:{Pagination:Mt,DelModal:Wt,ProductModal:qc}};Sc.render=ft;var Hc=Sc,Nc={class:"container"},Tc={class:"text-end mt-4"},Lc={class:"table mt-4"},Fc=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"名稱"),Object(n["g"])("th",null,"折扣百分比"),Object(n["g"])("th",null,"到期日"),Object(n["g"])("th",null,"是否啟用"),Object(n["g"])("th",null,"編輯")])],-1),Jc={key:0,class:"text-success"},zc={key:1,class:"text-muted"},Wc={class:"btn-group"};function Bc(e,t){var c=Object(n["x"])("Pagination"),r=Object(n["x"])("Couponmodal"),a=Object(n["x"])("DelModal");return Object(n["s"])(),Object(n["d"])("div",Nc,[Object(n["g"])("div",Tc,[Object(n["g"])("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=function(t){return e.openCouponModal(!0)})},"建立新的優惠券")]),Object(n["g"])("table",Lc,[Fc,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.coupons,(function(t,c){return Object(n["s"])(),Object(n["d"])("tr",{key:c},[Object(n["g"])("td",null,Object(n["A"])(t.title),1),Object(n["g"])("td",null,Object(n["A"])(t.percent)+"%",1),Object(n["g"])("td",null,Object(n["A"])(e.$filters.date(t.due_date)),1),Object(n["g"])("td",null,[1===t.is_enabled?(Object(n["s"])(),Object(n["d"])("span",Jc,"啟用")):(Object(n["s"])(),Object(n["d"])("span",zc,"未啟用"))]),Object(n["g"])("td",null,[Object(n["g"])("div",Wc,[Object(n["g"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(c){return e.openCouponModal(!1,t)}},"編輯",8,["onClick"]),Object(n["g"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(c){return e.openDelCouponModal(t)}},"刪除",8,["onClick"])])])])})),128))])]),Object(n["g"])(c,{pages:e.pagination,onEmitPages:e.fetchCoupons},null,8,["pages","onEmitPages"]),Object(n["g"])(r,{coupon:e.tempCoupon,"is-new":e.isNew,ref:"couponModal",onUpdateCoupon:e.updateCoupon},null,8,["coupon","is-new","onUpdateCoupon"]),Object(n["g"])(a,{item:e.tempCoupon,onDelItem:e.deleteCoupon,ref:"delModal"},null,8,["item","onDelItem"])])}var Qc={getAdminCoupons:function(e){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/coupons?page=").concat(e))},postAdminCoupon:function(e){return h.a.post("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/coupon"),{data:e})},putAdminCoupon:function(e){return h.a.put("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/coupon/").concat(e))},deleteAdminCoupon:function(e){return h.a.delete("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/coupon/").concat(e))}},Gc={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Kc={class:"modal-dialog",role:"document"},Xc={class:"modal-content"},Yc={class:"modal-header"},Zc={class:"modal-title",id:"exampleModalLabel"},en={key:0},tn={key:1},cn=Object(n["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),nn={class:"modal-body"},rn={class:"mb-3"},an=Object(n["g"])("label",{for:"title"},"標題",-1),on={class:"mb-3"},sn=Object(n["g"])("label",{for:"coupon_code"},"優惠碼",-1),ln={class:"mb-3"},un=Object(n["g"])("label",{for:"due_date"},"到期日",-1),dn={class:"mb-3"},bn=Object(n["g"])("label",{for:"price"},"折扣百分比",-1),pn={class:"mb-3"},On={class:"form-check"},mn=Object(n["g"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),jn={class:"modal-footer"},gn=Object(n["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function fn(e,t){return Object(n["s"])(),Object(n["d"])("div",Gc,[Object(n["g"])("div",Kc,[Object(n["g"])("div",Xc,[Object(n["g"])("div",Yc,[Object(n["g"])("h5",Zc,[e.isNew?(Object(n["s"])(),Object(n["d"])("span",en,"新增優惠卷")):(Object(n["s"])(),Object(n["d"])("span",tn,"編輯優惠卷"))]),cn]),Object(n["g"])("div",nn,[Object(n["g"])("div",rn,[an,Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tempCoupon.title=t}),placeholder:"請輸入標題"},null,512),[[n["E"],e.tempCoupon.title]])]),Object(n["g"])("div",on,[sn,Object(n["I"])(Object(n["g"])("input",{type:"text",class:"form-control",id:"coupon_code","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.tempCoupon.code=t}),placeholder:"請輸入優惠碼"},null,512),[[n["E"],e.tempCoupon.code]])]),Object(n["g"])("div",ln,[un,Object(n["I"])(Object(n["g"])("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.due_date=t})},null,512),[[n["E"],e.due_date]])]),Object(n["g"])("div",dn,[bn,Object(n["I"])(Object(n["g"])("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.tempCoupon.percent=t}),placeholder:"請輸入折扣百分比"},null,512),[[n["E"],e.tempCoupon.percent,void 0,{number:!0}]])]),Object(n["g"])("div",pn,[Object(n["g"])("div",On,[Object(n["I"])(Object(n["g"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.tempCoupon.is_enabled=t}),id:"is_enabled"},null,512),[[n["D"],e.tempCoupon.is_enabled]]),mn])])]),Object(n["g"])("div",jn,[gn,Object(n["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=function(t){return e.$emit("update-coupon",e.tempCoupon)})},"更新優惠券")])])])],512)}var hn=c("3835"),vn=(c("1276"),{props:{coupon:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{tempCoupon:{},due_date:""}},watch:{coupon:function(){this.tempCoupon=this.coupon;var e=new Date(1e3*this.tempCoupon.due_date).toISOString().split("T"),t=Object(hn["a"])(e,1);this.due_date=t[0]},due_date:function(){this.tempCoupon.due_date=Math.floor(new Date(this.due_date)/1e3)}},mixins:[Jt]});vn.render=fn;var wn=vn,xn={data:function(){return{coupons:[],pagination:{},tempCoupon:{title:"",is_enabled:0,percent:100,code:""},isNew:!1}},methods:{fetchCoupons:function(){var e=arguments,t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,c.prev=1,c.next=4,Qc.getAdminCoupons(n);case 4:if(r=c.sent,a=r.data,a.success){c.next=8;break}throw new Error("取得優惠券列表失敗");case 8:t.coupons=a.coupons,t.pagination=a.pagination,c.next=15;break;case 12:c.prev=12,c.t0=c["catch"](1),window.alert(c.t0.message);case 15:case"end":return c.stop()}}),c,null,[[1,12]])})))()},updateCoupon:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(c.prev=0,!t.isNew){c.next=12;break}return c.next=4,Qc.postAdminCoupon(e);case 4:if(n=c.sent,r=n.data,r.success){c.next=8;break}throw new Error("新增優惠券失敗");case 8:t.fetchCoupons(),t.$refs.couponModal.hideModal(),c.next=20;break;case 12:return c.next=14,Qc.putAdminCoupon(t.tempCoupon.id);case 14:if(a=c.sent,o=a.data,o.success){c.next=18;break}throw new Error("更改優惠券失敗");case 18:t.fetchCoupons(),t.$refs.couponModal.hideModal();case 20:c.next=25;break;case 22:c.prev=22,c.t0=c["catch"](0),window.alert(c.t0.message);case 25:case"end":return c.stop()}}),c,null,[[0,22]])})))()},deleteCoupon:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Qc.deleteAdminCoupon(e.tempCoupon.id);case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("刪除優惠券失敗");case 7:e.fetchCoupons(),e.$refs.delModal.hideModal(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),window.alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},openCouponModal:function(e,t){this.isNew=e,this.isNew?this.tempCoupon={due_date:(new Date).getTime()/1e3}:this.tempCoupon=Object(ht["a"])({},t),this.$refs.couponModal.openModal()},openDelCouponModal:function(e){this.tempCoupon=Object(ht["a"])({},e),this.$refs.delModal.openModal()}},created:function(){this.fetchCoupons()},components:{Couponmodal:wn,DelModal:Wt,Pagination:Mt}};xn.render=Bc;var yn=xn,kn={class:"container"},Cn={class:"table mt-4"},Pn=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"購買時間"),Object(n["g"])("th",null,"Email"),Object(n["g"])("th",null,"購買款項"),Object(n["g"])("th",null,"應付金額"),Object(n["g"])("th",null,"是否付款"),Object(n["g"])("th",null,"編輯")])],-1),_n={class:"list-unstyled"},Mn={class:"text-right"},An={class:"form-check form-switch"},Un={key:0},En={key:1},In={class:"btn-group"};function Rn(e,t){var c=Object(n["x"])("Pagination"),r=Object(n["x"])("delModal"),a=Object(n["x"])("OrderModal");return Object(n["s"])(),Object(n["d"])("div",kn,[Object(n["g"])("table",Cn,[Pn,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.orders,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id,class:{"text-secondary":!t.is_paid}},[Object(n["g"])("td",null,Object(n["A"])(e.$filters.date(t.create_at)),1),Object(n["g"])("td",null,[t.user?(Object(n["s"])(),Object(n["d"])("span",{key:0,textContent:Object(n["A"])(t.user.email)},null,8,["textContent"])):Object(n["e"])("",!0)]),Object(n["g"])("td",null,[Object(n["g"])("ul",_n,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(t.products,(function(e,t){return Object(n["s"])(),Object(n["d"])("li",{key:t},Object(n["A"])(e.product.title)+" 數量："+Object(n["A"])(e.qty)+" "+Object(n["A"])(e.product.unit),1)})),128))])]),Object(n["g"])("td",Mn,Object(n["A"])(t.total),1),Object(n["g"])("td",null,[Object(n["g"])("div",An,[Object(n["I"])(Object(n["g"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(c){return e.updatePaid(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[n["D"],t.is_paid]]),Object(n["g"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(n["s"])(),Object(n["d"])("span",Un,"已付款")):(Object(n["s"])(),Object(n["d"])("span",En,"未付款"))],8,["for"])])]),Object(n["g"])("td",null,[Object(n["g"])("div",In,[Object(n["g"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(c){return e.openModal(t)}},"檢視",8,["onClick"]),Object(n["g"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(c){return e.openDelOrderModal(t)}},"刪除",8,["onClick"])])])],2)})),128))])]),Object(n["g"])(c,{pages:e.pagination,onEmitPages:e.fetchOrders},null,8,["pages","onEmitPages"]),Object(n["g"])(r,{item:e.tempOrder,ref:"delModal",onDelItem:e.delOrder},null,8,["item","onDelItem"]),Object(n["g"])(a,{order:e.tempOrder,ref:"orderModal",onUpdatePaid:e.updatePaid},null,8,["order","onUpdatePaid"])])}var Vn={getAdminOrders:function(e){return h.a.get("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/orders?page=").concat(e))},deleteAdminOrder:function(e){return h.a.delete("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/order/").concat(e))},updatePaid:function(e,t){return h.a.put("".concat("https://vue3-course-api.hexschool.io/api/caesar/admin","/order/").concat(e),t)}},$n={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Dn={class:"modal-dialog modal-xl",role:"document"},qn={class:"modal-content border-0"},Sn=Object(n["g"])("div",{class:"modal-header bg-dark text-white"},[Object(n["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(n["g"])("span",null,"訂單細節")]),Object(n["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Hn={class:"modal-body"},Nn={class:"row"},Tn={class:"col-md-4"},Ln=Object(n["g"])("h3",null,"用戶資料",-1),Fn={class:"table"},Jn={key:0},zn=Object(n["g"])("th",{style:{width:"100px"}},"姓名",-1),Wn=Object(n["g"])("th",null,"Email",-1),Bn=Object(n["g"])("th",null,"電話",-1),Qn=Object(n["g"])("th",null,"地址",-1),Gn={class:"col-md-8"},Kn=Object(n["g"])("h3",null,"訂單細節",-1),Xn={class:"table"},Yn=Object(n["g"])("th",{style:{width:"100px"}},"訂單編號",-1),Zn=Object(n["g"])("th",null,"下單時間",-1),er=Object(n["g"])("th",null,"付款時間",-1),tr={key:0},cr={key:1},nr=Object(n["g"])("th",null,"付款狀態",-1),rr={key:0,class:"text-success"},ar={key:1,class:"text-muted"},or=Object(n["g"])("th",null,"總金額",-1),sr=Object(n["g"])("h3",null,"選購商品",-1),lr={class:"table"},ur=Object(n["g"])("thead",null,[Object(n["g"])("tr")],-1),ir={class:"text-end"},dr={class:"d-flex justify-content-end"},br={class:"form-check"},pr={class:"form-check-label",for:"flexCheckDefault"},Or={key:0},mr={key:1},jr={class:"modal-footer"},gr=Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function fr(e,t){return Object(n["s"])(),Object(n["d"])("div",$n,[Object(n["g"])("div",Dn,[Object(n["g"])("div",qn,[Sn,Object(n["g"])("div",Hn,[Object(n["g"])("div",Nn,[Object(n["g"])("div",Tn,[Ln,Object(n["g"])("table",Fn,[e.tempOrder.user?(Object(n["s"])(),Object(n["d"])("tbody",Jn,[Object(n["g"])("tr",null,[zn,Object(n["g"])("td",null,Object(n["A"])(e.tempOrder.user.name),1)]),Object(n["g"])("tr",null,[Wn,Object(n["g"])("td",null,Object(n["A"])(e.tempOrder.user.email),1)]),Object(n["g"])("tr",null,[Bn,Object(n["g"])("td",null,Object(n["A"])(e.tempOrder.user.tel),1)]),Object(n["g"])("tr",null,[Qn,Object(n["g"])("td",null,Object(n["A"])(e.tempOrder.user.address),1)])])):Object(n["e"])("",!0)])]),Object(n["g"])("div",Gn,[Kn,Object(n["g"])("table",Xn,[Object(n["g"])("tbody",null,[Object(n["g"])("tr",null,[Yn,Object(n["g"])("td",null,Object(n["A"])(e.tempOrder.id),1)]),Object(n["g"])("tr",null,[Zn,Object(n["g"])("td",null,Object(n["A"])(e.$filters.date(e.tempOrder.create_at)),1)]),Object(n["g"])("tr",null,[er,Object(n["g"])("td",null,[e.tempOrder.paid_date?(Object(n["s"])(),Object(n["d"])("span",tr,Object(n["A"])(e.$filters.date(e.tempOrder.paid_date)),1)):(Object(n["s"])(),Object(n["d"])("span",cr,"時間不正確"))])]),Object(n["g"])("tr",null,[nr,Object(n["g"])("td",null,[e.tempOrder.is_paid?(Object(n["s"])(),Object(n["d"])("strong",rr,"已付款")):(Object(n["s"])(),Object(n["d"])("span",ar,"尚未付款"))])]),Object(n["g"])("tr",null,[or,Object(n["g"])("td",null,Object(n["A"])(e.$filters.currency(e.tempOrder.total)),1)])])]),sr,Object(n["g"])("table",lr,[ur,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e.tempOrder.products,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id},[Object(n["g"])("th",null,Object(n["A"])(t.product.title),1),Object(n["g"])("td",null,Object(n["A"])(t.qty)+" / "+Object(n["A"])(t.product.unit),1),Object(n["g"])("td",ir,Object(n["A"])(e.$filters.currency(t.final_total)),1)])})),128))])]),Object(n["g"])("div",dr,[Object(n["g"])("div",br,[Object(n["I"])(Object(n["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tempOrder.is_paid=t})},null,512),[[n["D"],e.tempOrder.is_paid]]),Object(n["g"])("label",pr,[e.tempOrder.is_paid?(Object(n["s"])(),Object(n["d"])("span",Or,"已付款")):(Object(n["s"])(),Object(n["d"])("span",mr,"未付款"))])])])])])]),Object(n["g"])("div",jr,[gr,Object(n["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("update-paid",e.tempOrder)})}," 修改付款狀態 ")])])])],512)}var hr={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},watch:{order:function(){this.tempOrder=this.order}},mixins:[Jt]};hr.render=fr;var vr=hr,wr={data:function(){return{orders:{},isNew:!1,pagination:{},isLoading:!1,tempOrder:{}}},methods:{fetchOrders:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Vn.getAdminOrders(e);case 3:if(n=c.sent,r=n.data,r.success){c.next=7;break}throw new Error("取得訂單列表失敗");case 7:t.orders=r.orders,t.pagination=r.pagination,c.next=14;break;case 11:c.prev=11,c.t0=c["catch"](0),Window.alert(c.t0.message);case 14:case"end":return c.stop()}}),c,null,[[0,11]])})))()},delOrder:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var c,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Vn.deleteAdminOrder(e.tempOrder.id);case 3:if(c=t.sent,n=c.data,n.success){t.next=7;break}throw new Error("刪除訂單失敗");case 7:e.$refs.delModal.hideModal(),e.fetchOrders(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),window.alert(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},updatePaid:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var n,r,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.prev=0,t.isLoading=!0,n={is_paid:e.is_paid},c.next=5,Vn.updatePaid(e.id,n);case 5:if(r=c.sent,a=r.data,a.success){c.next=9;break}throw new Error("修改訂單失敗");case 9:t.isLoading=!1,t.$refs.orderModal.hideModal(),t.fetchOrders(),c.next=17;break;case 14:c.prev=14,c.t0=c["catch"](0),window.alert(c.t0.message);case 17:case"end":return c.stop()}}),c,null,[[0,14]])})))()},openDelOrderModal:function(e){this.tempOrder=Object(ht["a"])({},e),this.$refs.delModal.openModal()},openModal:function(e){this.tempOrder=Object(ht["a"])({},e),this.$refs.orderModal.openModal()}},created:function(){this.fetchOrders()},components:{Pagination:Mt,DelModal:Wt,OrderModal:vr}};wr.render=Rn;var xr=wr,yr=localStorage.getItem("token"),kr=function(e,t,c){yr?c("/"):c()},Cr=function(e,t,c){yr?c():c("/login")},Pr=[{path:"/",name:"index",component:E},{path:"/cart",name:"cart",component:me,beforeEnter:Cr},{path:"/checkout/:id",name:"checkout",component:tt},{path:"/product/:id",name:"product",component:ye},{path:"/login",name:"login",component:De,beforeEnter:kr},{path:"/admin",name:"admin",component:lt,children:[{path:"",component:Hc},{path:"coupon",component:yn},{path:"order",component:xr}],beforeEnter:Cr}],_r=Object(s["a"])({history:Object(s["b"])(),routes:Pr}),Mr=_r;c("ce50"),c("bb35"),c("b680");function Ar(e){var t=parseInt(e,10);return"".concat(t.toFixed(0).replace(/./g,(function(e,t,c){return t&&"."!==e&&(c.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e})))}function Ur(e){var t=new Date(1e3*e);return t.toLocaleDateString()}h.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)}));var Er=Object(n["c"])(o);Er.config.globalProperties.$filters={date:Ur,currency:Ar},Er.use(Mr),Er.mount("#app")},"9cdc":function(e,t,c){"use strict";c("c701")},bb35:function(e,t,c){},c701:function(e,t,c){},ce50:function(e,t,c){}});
//# sourceMappingURL=app.c3f5b780.js.map